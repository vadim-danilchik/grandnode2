Способы доставки:
 - самовывоз(fixedrate)
 - курьер (fixedrate)
 - почта (postshipping) сумма от цены
 - европочта(plugin - selectpoint) сумма от веса
 
Способы оплаты:
 - наложенный платеж
 - наличные при получении (cashondelivery)
 - картой при получении (cashondelivery)
 - картой онлайн(плагин как paypal, redirect to page)


mongodb database: elfikshop

попробовать сделать самовывоз встроенный(перепроверить pdf, orderdetails)
плагины оплат
верхние ссылки в скырваемое меню перенести
коллекции на будущее

https://biz.mail.ru/
236x60 logo

сетевая статистика
sudo iftop
sudo nethogs
конект к mongodb
mongosh --port 27017
mongodump --host="localhost" --port=27017



sudo systemctl stop nginx.service
sudo systemctl reload nginx.service
sudo journalctl -fu grandnode.service
sudo systemctl start grandnode.service
sudo systemctl stop grandnode.service && sudo systemctl start grandnode.service
sudo systemctl status grandnode.service


85.209.148.26


CENTOS 8
##create user, change login method
https://www.cyberciti.biz/faq/how-to-disable-ssh-password-login-on-linux/
useradd -m -s /bin/bash vdanilchik
passwd vdanilchik
usermod -aG wheel vdanilchik
su - vdanilchik
id vdanilchik

##copy ssh key
type C:\Users\vdanilchik\.ssh\id_rsa.pub | ssh vdanilchik@85.209.148.26 'cat >> .ssh/authorized_keys'

##Set permissions on the .ssh folder and authorized_keys file:
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys

## .NET5 SDK
sudo dnf install dotnet-sdk-5.0

## mongodb  https://www.digitalocean.com/community/tutorials/how-to-install-mongodb-on-centos-8
sudo touch /etc/yum.repos.d/mongodb-org-5.0.repo
##put inside
[mongodb-org-5.0]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/5.0/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-5.0.asc
##install
sudo yum install -y mongodb-org
sudo systemctl start mongod
sudo systemctl status mongod
sudo systemctl enable mongod
##configure mongo user https://www.digitalocean.com/community/tutorials/how-to-secure-mongodb-on-centos-8
##u:elfikiAdmin, p:1qaz@WSX
use admin
db.createUser({ user: "elfikiAdmin", pwd: passwordPrompt(), roles: [ "root" ]})
exit
sudo nano /etc/mongod.conf

##backup, restore mongodb
https://www.digitalocean.com/community/tutorials/how-to-back-up-restore-and-migrate-a-mongodb-database-on-centos-8

##Configure Remote Access for MongoDB
https://www.digitalocean.com/community/tutorials/how-to-configure-remote-access-for-mongodb-on-centos-8


##nginx | help https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-8-ru
sudo dnf install nginx
sudo systemctl enable nginx
sudo systemctl start nginx
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --list-all
sudo firewall-cmd --reload

##setup domain server
sudo mkdir -p /var/www/elfiki
sudo chown -R $USER:$USER /var/www/elfiki
sudo dnf install nano
nano /var/www/elfiki/index.html
sudo nano /etc/nginx/conf.d/elfiki.conf
sudo nginx -t
sudo systemctl restart nginx
chcon -vR system_u:object_r:httpd_sys_content_t:s0 /var/www/elfiki/

##setup letsencrypt sertificate https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-centos-8
sudo dnf install epel-release
sudo dnf install certbot python3-certbot-nginx
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
sudo certbot --nginx -d elfiki.by -d www.elfiki.by
sudo crontab -e
##add line
0 0,12 * * * python -c 'import random; import time; time.sleep(random.random() * 3600)' && certbot renew --quiet

##use sftp on filezila for publish

##setup asp.net service
sudo vi /etc/systemd/system/grandnode.service
##insert into
[Unit]
Description=GrandNode 2.0

[Service]
WorkingDirectory=/var/www/elfiki
ExecStart=/usr/bin/dotnet /var/www/elfiki/Grand.Web.dll
Restart=always
RestartSec=10
SyslogIdentifier=dotnet-grandnode
User=vdanilchik
Environment=ASPNETCORE_ENVIRONMENT=Production

[Install]
WantedBy=multi-user.target

sudo systemctl enable grandnode.service
sudo systemctl start grandnode.service

##update nginx
sudo nano /etc/nginx/conf.d/elfiki.conf
sudo nano /etc/nginx/proxy.conf
sudo nano /etc/nginx/nginx.conf

##nginx commands
sudo systemctl stop nginx
sudo systemctl start nginx
sudo systemctl restart nginx
sudo systemctl reload nginx
sudo systemctl disable nginx
sudo systemctl enable nginx


##see failed logins
egrep "Failed|Failure" /var/log/secure

sudo mongodump --uri="mongodb://85.209.148.26:27017/elfikshop" --out="/var/backups/mongobackups/" --username="elfikiAdmin" --password="1qaz@WSX" --authenticationDatabase="admin"
sudo mongorestore --uri="mongodb://85.209.148.26:27017/elfikshop" --username="elfikiAdmin" --password="1qaz@WSX" --authenticationDatabase="admin" --drop /var/backups/mongobackups/elfikshop

sudo systemctl stop grandnode.service
sudo systemctl start grandnode.service
